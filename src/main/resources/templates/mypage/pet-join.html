<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>애니플랜트 : 반려친구 등록</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <style>
    .logo_aniplant .link {
        background-image: url("/img/aniplant_logo01.png");
        background-repeat: no-repeat;
        background-size: 200px 100px;
        background-position: center;
        display: block;
        width: 200px;
        height: 100px;
    }
    .blind {
        position: absolute;
        width: 1px;
        height: 1px;
        overflow: hidden;
        clip: rect(0 0 0 0);
    }
    .error {
        color: red;
        font-size: 12px;
    }
  </style>
</head>
<body>
    <h1 class="logo_aniplant">
        <a href="/index.do" class="link"></a>
        <span class="blind">애니플랜트</span>
    </h1>
    <div class="content">
        <form id="join_form" name="join_form" method="post" action="/api/register-pet" enctype="application/json">
        <input type="text" id="nameInput" name="name" placeholder="이름을 입력해 주세요"><br>
        <input type="date" id="birthInput" name="birthInput" placeholder="생일을 입력해 주세요"><br>
        <input type="date" id="adopted_atInput" name="adopted_at" placeholder="입양일"><br>       
        <button type="button" id="join_btn" class="btn_submit">등록</button>
        </form>
    </div>
</body>
<script>
    $(document).ready(function() {
        $('#join_btn').on('click', function(event) {
            event.preventDefault();
            
            const petData = {
                name: $('#nameInput').val(),
                birth: $('#birthInput').val(),
                adopted_at: $('#adopted_atInput').val()
            };

            $.ajax({
                url: '/api/register-pet',
                contentType: 'application/json',
                data: JSON.stringify(petData),
                type: 'POST',
                success: function () {
                    alert('등록이 완료되었습니다.');
                    location.href = '/index.do';
                },
                error: function () {
                    alert('등록에 실패하였습니다.');
                }
            });
        });
    });
</script>
</html>