<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mapper.board">
    <resultMap id="boardResultMap" type="boardVO">
		<result property="post_num" column="post_num"/>
        <result property="category_num" column="category_num"/>
        <result property="title" column="title"/>
        <result property="content" column="content"/>
        <result property="views" column="views"/>
        <result property="good" column="good"/>
        <result property="bad" column="bad"/>
        <result property="created_user_num" column="created_user_num"/>
        <result property="created_at" column="created_at"/>
        <result property="updated_user_num" column="updated_user_num"/>
        <result property="updated_at" column="updated_at"/>
        <result property="is_deleted" column="is_deleted"/>
        <result property="deleted_user_num" column="deleted_user_num"/>
        <result property="deleted_at" column="deleted_at"/>
    </resultMap>
    
      <select id="selectArticlesByCategory" resultType="boardVO" parameterType="int">
    SELECT * FROM TB_BOARD
    WHERE  category_num = #{categoryNum}
      </select>
      
      <select id="selectArticleByPostNum" resultType="boardVO" parameterType="int">
        SELECT * FROM TB_BOARD
        WHERE post_num = #{post_num}
    </select>
  	  
	 <insert id="insertArticle" parameterType="com.mainproject.board.vo.BoardVO">
        INSERT INTO TB_BOARD (category_num, title, content, views, good, bad, created_user_num, created_at)
        VALUES (#{category_num}, #{title}, #{content}, #{views}, #{good}, #{bad}, #{created_user_num}, NOW())
    </insert>
    
    <update id="updateBoard" parameterType="com.mainproject.board.vo.BoardVO">
    UPDATE TB_BOARD
    SET category_num = #{category_num},
        title = #{title},
        content = #{content},
        updated_at = NOW() -- 현재 시간으로 업데이트
    WHERE post_num = #{post_num}
	</update>

	<delete id="deleteBoard" parameterType="int">
    	DELETE FROM TB_BOARD WHERE post_num = #{post_num}
	</delete>
    

</mapper>
